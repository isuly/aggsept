<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>hi</title>
	<link rel="stylesheet" href="css/main3.css">
	<link rel="stylesheet" href="css/vfim3.css">
	<link 
		href="https://fonts.googleapis.com/css?family=Montserrat" 
		rel="stylesheet">
	<meta 
		name="viewport" 
		content="width=device-width, initial-scale=1">
	<link 
		href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700&amp;subset=cyrillic"
		rel="stylesheet"> 
	<script
		src="https://code.jquery.com/jquery-3.3.1.min.js"
		integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
		crossorigin="anonymous"></script>
</head>
<body>
	<div class="container">
		 <h2>Aggsept</h2>
		<div class="list">
			<form onsubmit="FA(this.name);return false" name="set_from" id="form">
				<div class="list__body">
					<div class="list__add">
						<div class="list__add-btn">
							<p>Добавить аккаунт:<br></p>


								<div class="addEmail"><img src = "email.png" width = "50px" height = "50px"></div> 


								<div class="addVk"><img src = "vk.png" width = "50px" height = "50px"></div> 


								<div class="addInst"><img src = "insta.png" width = "50px" height = "50px"></div>

						</div>
					</div>
					<div class="list__accounts">

						 
					</div>
				</div>
				<button  >Продолжить</button>
			</form>
		</div>
	</div>	
	<script>
		var mail = 2, insta = 1, vk = 1;
		$(document).on('click', '.addEmail', function () {
			var par = document.getElementsByClassName('list__accounts')[0];
			console.log('lllll');
			var account = document.createElement('div');
			account.className = "account";
			var accountImg = document.createElement('div');
			accountImg.className = "account__img";
			accountImg.innerHTML = '<i class="icon-mail-alt"></i>'
			var accountData = document.createElement('div');
			accountData.className = "account__data";
			accountData.innerHTML = '<div class="group"><input type="text" name="mail" required><span class="highlight"></span><span class="bar"></span><label>Маил</label></div><div class="group"><input type="password" name="mail" required><span class="highlight"></span><span class="bar"></span><label>Пароль</label></div>';
			var accountRed = document.createElement('div');
			accountRed.className = "account__red";
			accountRed.innerHTML = 'Удалить';
			par.insertBefore(account, par.firstChild);
			account.appendChild(accountImg);
			account.appendChild(accountData);
			account.appendChild(accountRed);
			mail++;
		});
		$(document).one('click', '.addVk', function () {
			var par = document.getElementsByClassName('list__accounts')[0];
			console.log('lllll');
			var account = document.createElement('div');
			account.className = "account";
			var accountImg = document.createElement('div');
			accountImg.className = "account__img";
			accountImg.innerHTML = '<i class="icon-vkontakte"></i>'
			var accountData = document.createElement('div');
			accountData.className = "account__data";
			accountData.innerHTML = '<div class="group"><input type="text" name="vk" required><span class="highlight"></span><span class="bar"></span><label>Логин</label></div><div class="group"><input type="password" name="vk" required><span class="highlight"></span><span class="bar"></span><label>Пароль</label></div>';
			var accountRed = document.createElement('div');
			accountRed.className = "account__red";
			accountRed.innerHTML = 'Удалить';
			par.insertBefore(account, par.firstChild);
			account.appendChild(accountImg);
			account.appendChild(accountData);
			account.appendChild(accountRed);
			vk++;
		});
		$(document).one('click', '.addInst', function () {
			var par = document.getElementsByClassName('list__accounts')[0];
			console.log('lllll');
			var account = document.createElement('div');
			account.className = "account";
			var accountImg = document.createElement('div');
			accountImg.className = "account__img";
			accountImg.innerHTML = '<i class="icon-instagram"></i>'
			var accountData = document.createElement('div');
			accountData.className = "account__data";
			accountData.innerHTML = '<div class="group"><input type="text" name="insta" required><span class="highlight"></span><span class="bar"></span><label>Логин</label></div><div class="group"><input type="password" name="insta" required><span class="highlight"></span><span class="bar"></span><label>Пароль</label></div>';
			var accountRed = document.createElement('div');
			accountRed.className = "account__red";
			accountRed.innerHTML = 'Удалить';
			par.insertBefore(account, par.firstChild);
			account.appendChild(accountImg);
			account.appendChild(accountData);
			account.appendChild(accountRed);
			insta++;
		});
		$(document).on('click', '.account__red', function () {
			$(this).parent().remove();
		});


		function FA(){
			var mas = [];
		    var data = {};
		    var k = 0;
		    var log, pass;
			$('#form').find ('input, textearea, select').each(function() 
			{
				if (k==0){
					log = $(this).val();
					k = 1;
				}
				else{
					pass = $(this).val();
					k = 0;
					
					data["what"] = this.name; 
					data["login"] = log;
					data["password"] = pass;
					if (data["what"]=="mail")
					{
						var regexp = /@(\w+)/;
						var x = data["login"].match(regexp);
						data["mailtype"] = x[1];
					}
					else
					{
						data["mailtype"] = "";
					}
					mas.push(data); 
					data = {};     
				}
			});
			 
			console.log(mas);
		 }
 
	</script>
</body>
</html>